"use strict";const designLegend=document.querySelector(".js_designLegend"),design=document.querySelector(".js_design"),arrowDesign=document.querySelector(".js_arrowDesign"),fillLegend=document.querySelector(".js_fillLegend"),fill=document.querySelector(".js_fill"),arrowFill=document.querySelector(".js_arrowFill"),shareLegend=document.querySelector(".js_shareLegend"),share=document.querySelector(".js_share"),arrowShare=document.querySelector(".js_arrowShare"),radioButton1=document.querySelector(".js_radio-1"),radioButton2=document.querySelector(".js_radio-2"),radioButton3=document.querySelector(".js_radio-3"),previewContainerCard=document.querySelector(".js_preview");function handleClickRadio1(e){previewContainerCard.classList.remove("palette-2"),previewContainerCard.classList.remove("palette-3"),previewContainerCard.classList.add("palette-1"),data.palette=1}function handleClickRadio2(e){previewContainerCard.classList.remove("palette-1"),previewContainerCard.classList.remove("palette-3"),previewContainerCard.classList.add("palette-2"),data.palette=2}function handleClickRadio3(e){previewContainerCard.classList.remove("palette-1"),previewContainerCard.classList.remove("palette-2"),previewContainerCard.classList.add("palette-3"),data.palette=3}function unfoldForm(e){"designLegend"===e&&(design.classList.toggle("collapsed"),fill.classList.add("collapsed"),share.classList.add("collapsed")),"fillLegend"===e&&(design.classList.add("collapsed"),fill.classList.toggle("collapsed"),share.classList.add("collapsed")),"shareLegend"===e&&(design.classList.add("collapsed"),fill.classList.add("collapsed"),share.classList.toggle("collapsed"))}function rotateArrow(e){"designLegend"===e&&(arrowDesign.classList.toggle("rotate"),arrowFill.classList.add("rotate"),arrowShare.classList.add("rotate")),"fillLegend"===e&&(arrowDesign.classList.add("rotate"),arrowFill.classList.toggle("rotate"),arrowShare.classList.add("rotate")),"shareLegend"===e&&(arrowDesign.classList.add("rotate"),arrowFill.classList.add("rotate"),arrowShare.classList.toggle("rotate"))}function handleCollapsed(e){e.preventDefault();const t=e.currentTarget.id;unfoldForm(t),rotateArrow(t)}radioButton1.addEventListener("click",handleClickRadio1),radioButton2.addEventListener("click",handleClickRadio2),radioButton3.addEventListener("click",handleClickRadio3),designLegend.addEventListener("click",handleCollapsed),fillLegend.addEventListener("click",handleCollapsed),shareLegend.addEventListener("click",handleCollapsed);let data={palette:1,name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:""};const cardName=document.querySelector(".js_cardName"),cardJob=document.querySelector(".js_cardJob"),cardPhone=document.querySelector(".js_cardPhone"),cardEmail=document.querySelector(".js_cardEmail"),cardLinkedin=document.querySelector(".js_cardLinkedin"),cardGithub=document.querySelector(".js_cardGithub"),cardImage=document.querySelector(".js__profile-image"),cardImagePrev=document.querySelector(".js__profile-preview");function renderPreview(){""===data.name?cardName.innerHTML="Nombre Apellidos":cardName.innerHTML=data.name,""===data.job?cardJob.innerHTML="Front-end developer":cardJob.innerHTML=data.job,""===data.phone?cardPhone.href="":cardPhone.href="tel: "+data.phone,""===data.email?cardEmail.href="":cardEmail.href="mailto: "+data.email,""===data.linkedin?cardLinkedin.href="":cardLinkedin.href="https://www.linkedin.com/in/"+data.linkedin,""===data.github?cardGithub.href="":cardGithub.href="https://github.com/"+data.github}function handleKeyupInputs(e){const t=e.target;"name"===t.id?data.name=t.value:"job"===t.id?data.job=t.value:"email"===t.id?data.email=t.value:"phone"===t.id?data.phone=t.value:"linkedin"===t.id?data.linkedin=t.value:"github"===t.id&&(data.github=t.value),renderPreview(),""!==data.name&&""!==data.job&&""!==data.phone&&""!==data.email&&""!==data.linkedin&&""!==data.github&&""!==data.photo&&(containerDone.innerHTML="",containerDone.classList.add("collapsed"))}fill.addEventListener("keyup",handleKeyupInputs);const buttonCreateCard=document.querySelector(".js_buttonCreateCard"),containerDone=document.querySelector(".js_containerDone");function fetchCardLink(){fetch("//awesome-profile-cards.herokuapp.com/card",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{containerDone.classList.remove("collapsed");const t=document.createElement("h2");t.classList.add("containerDone__title");const a=document.createTextNode("¡Bien hecho! Tu tarjeta ha sido creada");t.appendChild(a);const r=document.createElement("a");r.href=e.cardURL,r.target="_blanck",r.classList.add("containerDone__link");const n=document.createTextNode(e.cardURL);r.appendChild(n);const o=document.createElement("button");o.classList.add("buttonShare","js-buttonShare");const d=document.createElement("a");d.href="https://twitter.com/intent/tweet?text=%C2%A1He%20creado%20mi%20propia%20tarjeta%20de%20contacto%20kawaii!%20Puedes%20verla%20aqu%C3%AD%3A&url="+r.href,d.target="_blanck",d.classList.add("buttonShare__link");const i=document.createElement("i");i.classList.add("fa-brands","fa-twitter");const l=document.createTextNode(" Compartir en Twitter");o.appendChild(d),d.append(i,l),containerDone.append(t,r,o)})}function showErrorMsg(){containerDone.classList.remove("collapsed");const e=document.createElement("h2");e.classList.add("containerDone__title");const t=document.createTextNode("¡Ojo! Rellena todo el formulario");e.appendChild(t),containerDone.appendChild(e)}function validateFormFields(){return""!==data.name&&""!==data.job&&""!==data.phone&&""!==data.email&&""!==data.linkedin&&""!==data.github&&""!==data.photo&&(fetchCardLink(),buttonCreateCard.classList.add("buttonCreateCard--sent"),!0)}function clickOnceButtonCreateCard(){""===containerDone.innerHTML&&(!0===validateFormFields()?buttonCreateCard.disabled=!0:showErrorMsg())}function handleClickButtonCreateCard(e){e.preventDefault(),clickOnceButtonCreateCard()}buttonCreateCard.addEventListener("click",handleClickButtonCreateCard);const form=document.querySelector(".js_form"),resetButton=document.querySelector(".js_reset");function resetCardFields(){cardName.innerHTML="Nombre Apellidos",cardJob.innerHTML="Front-end developer",cardPhone.href="",cardEmail.href="",cardLinkedin.href="",cardGithub.href="",cardImage.style="",cardImagePrev.style=""}function resetCreateCard(){data.phone="",buttonCreateCard.classList.remove("buttonCreateCard--sent"),containerDone.classList.add("collapsed"),buttonCreateCard.disabled=!1,containerDone.innerHTML=""}function resetPalettes(){previewContainerCard.classList.add("palette-1"),previewContainerCard.classList.remove("palette-2"),previewContainerCard.classList.remove("palette-3")}function resetData(){data={palette:1,name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:""}}function handleClickButtonReset(){form.reset(),resetCardFields(),resetCreateCard(),resetPalettes(),resetData(),localStorage.setItem("updatedData",JSON.stringify(data))}resetButton.addEventListener("click",handleClickButtonReset);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}fileField.addEventListener("change",getImage);const name=document.querySelector(".js_name"),job=document.querySelector(".js_job"),photo=document.querySelector(".js_photo"),email=document.querySelector(".js_email"),phone=document.querySelector(".js_phone"),linkedin=document.querySelector(".js_linkedin"),github=document.querySelector(".js_github"),getInfo=JSON.parse(localStorage.getItem("updatedData"));function handleChangeFormFields(e){e.preventDefault(),localStorage.setItem("updatedData",JSON.stringify(data))}function localStoragePalettes(){data.palette===parseInt(radioButton1.value)?(radioButton1.checked=!0,radioButton2.checked=!1,radioButton3.checked=!1,previewContainerCard.classList.remove("palette-2"),previewContainerCard.classList.remove("palette-3"),previewContainerCard.classList.add("palette-1")):data.palette===parseInt(radioButton2.value)?(radioButton2.checked=!0,radioButton1.checked=!1,radioButton3.checked=!1,previewContainerCard.classList.remove("palette-1"),previewContainerCard.classList.remove("palette-3"),previewContainerCard.classList.add("palette-2")):data.palette===parseInt(radioButton3.value)&&(radioButton3.checked=!0,radioButton2.checked=!1,radioButton1.checked=!1,previewContainerCard.classList.remove("palette-1"),previewContainerCard.classList.remove("palette-2"),previewContainerCard.classList.add("palette-3"))}function getFromLocalStorage(){name.value=data.name,job.value=data.job,email.value=data.email,phone.value=data.phone,linkedin.value=data.linkedin,github.value=data.github,""!==data.photo&&(profileImage.style.backgroundImage=`url(${data.photo})`,profilePreview.style.backgroundImage=`url(${data.photo})`),renderPreview(),localStoragePalettes()}form.addEventListener("change",handleChangeFormFields),null!==getInfo&&(data=getInfo,getFromLocalStorage());